/* ============================================
   Questions Data
   ============================================ */

const questionsData = {
    "دول": [
        {
            question: "ما هي عاصمة المملكة العربية السعودية؟",
            options: ["الرياض", "جدة", "مكة", "الدمام"],
            correct: 0
        },
        {
            question: "أي دولة تشتهر ببرج إيفل؟",
            options: ["إيطاليا", "فرنسا", "ألمانيا", "إسبانيا"],
            correct: 1
        },
        {
            question: "ما هي أكبر دولة في العالم من حيث المساحة؟",
            options: ["الصين", "روسيا", "الولايات المتحدة", "كندا"],
            correct: 1
        },
        {
            question: "أي دولة تشتهر بجبل كليمنجارو؟",
            options: ["كينيا", "تنزانيا", "أوغندا", "رواندا"],
            correct: 1
        },
        {
            question: "ما هي عاصمة اليابان؟",
            options: ["سيول", "طوكيو", "بكين", "هونغ كونغ"],
            correct: 1
        },
        {
            question: "أي دولة تشتهر بتمثال المسيح المخلص؟",
            options: ["البرازيل", "الأرجنتين", "تشيلي", "بيرو"],
            correct: 0
        },
        {
            question: "ما هي أصغر دولة في العالم؟",
            options: ["موناكو", "الفاتيكان", "سان مارينو", "ليختنشتاين"],
            correct: 1
        }
    ],
    "يوتيوبرز": [
        {
            question: "من هو اليوتيوبر السعودي المعروف بقناة 'بندريتا'؟",
            options: ["عبدالعزيز الغامدي", "فهد العتيبي", "عبدالله السالم", "سعد الغامدي"],
            correct: 2
        },
        {
            question: "ما هو اسم القناة الشهيرة لليوتيوبر 'أبو فلة'؟",
            options: ["أبو فلة", "فلة شو", "الفلة", "أبو الفلة"],
            correct: 0
        },
        {
            question: "من هو اليوتيوبر المعروف بقناة 'رائد اكس'؟",
            options: ["رائد الغامدي", "رائد العتيبي", "رائد السالم", "رائد الفلة"],
            correct: 0
        },
        {
            question: "أي يوتيوبر سعودي يشتهر بمحتوى الطبخ والمطبخ؟",
            options: ["بندريتا", "أبو فلة", "رائد اكس", "الزعيم"],
            correct: 3
        },
        {
            question: "من هو اليوتيوبر المعروف بقناة 'مصطفى'؟",
            options: ["مصطفى الغامدي", "مصطفى العتيبي", "مصطفى السالم", "مصطفى الفلة"],
            correct: 0
        },
        {
            question: "أي يوتيوبر يشتهر بمحتوى الألعاب والترفيه؟",
            options: ["بندريتا", "أبو فلة", "رائد اكس", "الزعيم"],
            correct: 2
        },
        {
            question: "من هو اليوتيوبر المعروف بقناة 'الزعيم'؟",
            options: ["عبدالعزيز الغامدي", "فهد العتيبي", "عبدالله السالم", "سعد الغامدي"],
            correct: 1
        }
    ],
    "ألعاب": [
        {
            question: "ما هو اسم اللعبة الشهيرة التي يلعبها 'ماريو'؟",
            options: ["سونيك", "ماريو", "زيلدا", "بوكيمون"],
            correct: 1
        },
        {
            question: "أي لعبة تشتهر بـ'الزومبي'؟",
            options: ["كول أوف ديوتي", "ريسبكت", "فورتنايت", "أبكس ليجندز"],
            correct: 1
        },
        {
            question: "ما هي أشهر لعبة 'بطاقات' في العالم؟",
            options: ["يوغيو", "بوكيمون", "ماجيك", "هارتستون"],
            correct: 1
        },
        {
            question: "أي لعبة تشتهر بـ'السباقات'؟",
            options: ["فيفا", "نيد فور سبيد", "غران توريزمو", "أسبحالت"],
            correct: 1
        },
        {
            question: "ما هو اسم اللعبة التي يلعبها 'سونيك'؟",
            options: ["ماريو", "سونيك", "زيلدا", "بوكيمون"],
            correct: 1
        },
        {
            question: "أي لعبة تشتهر بـ'كرة القدم'؟",
            options: ["فيفا", "بيس", "وي", "أف سي"],
            correct: 0
        },
        {
            question: "ما هي أشهر لعبة 'موبايل' في العالم؟",
            options: ["كلاش رويال", "بوبجي", "فري فاير", "كاندي كراش"],
            correct: 2
        }
    ],
    "لغات": [
        {
            question: "ما هي اللغة الرسمية في البرازيل؟",
            options: ["الإسبانية", "البرتغالية", "الإنجليزية", "الفرنسية"],
            correct: 1
        },
        {
            question: "أي لغة تكتب من اليمين إلى اليسار؟",
            options: ["الإنجليزية", "العربية", "الصينية", "الروسية"],
            correct: 1
        },
        {
            question: "ما هي أكثر اللغات تحدثاً في العالم؟",
            options: ["الإنجليزية", "الصينية", "الإسبانية", "العربية"],
            correct: 1
        },
        {
            question: "أي لغة تشتهر بـ'الأبجدية اللاتينية'؟",
            options: ["العربية", "الإنجليزية", "الصينية", "اليابانية"],
            correct: 1
        },
        {
            question: "ما هي لغة 'الماندرين'؟",
            options: ["اليابانية", "الكورية", "الصينية", "التايلاندية"],
            correct: 2
        },
        {
            question: "أي لغة تكتب بالهيراغانا والكانجي؟",
            options: ["الصينية", "الكورية", "اليابانية", "الفيتنامية"],
            correct: 2
        },
        {
            question: "ما هي اللغة الرسمية في مصر؟",
            options: ["الفارسية", "التركية", "العربية", "الأمازيغية"],
            correct: 2
        }
    ],
    "مطاعم": [
        {
            question: "ما هو أشهر مطعم في العالم للوجبات السريعة؟",
            options: ["ماكدونالدز", "برغر كينغ", "كنتاكي", "وينديز"],
            correct: 0
        },
        {
            question: "أي مطاعم تشتهر بـ'البيتزا'؟",
            options: ["دومينوز", "بيتزا هات", "بابا جونز", "كلها صحيح"],
            correct: 3
        },
        {
            question: "ما هو أشهر مطعم صيني في العالم؟",
            options: ["باندا إكسبريس", "بي إف تشانغ", "تشيبوتل", "كلها صحيح"],
            correct: 1
        },
        {
            question: "أي مطاعم تشتهر بـ'الدجاج المقلي'؟",
            options: ["ماكدونالدز", "كنتاكي", "وينديز", "بوبايز"],
            correct: 1
        },
        {
            question: "ما هو أشهر مطعم إيطالي في العالم؟",
            options: ["أوليف غاردن", "كاريتا", "روميو", "كلها صحيح"],
            correct: 0
        },
        {
            question: "أي مطاعم تشتهر بـ'البرغر'؟",
            options: ["برغر كينغ", "كارلز جونيور", "إن أند أوت", "كلها صحيح"],
            correct: 3
        },
        {
            question: "ما هو أشهر مطعم عربي في العالم؟",
            options: ["البرجر", "شاورما", "الكبسة", "المندي"],
            correct: 1
        }
    ],
    "براندات عالمية": [
        {
            question: "ما هي أشهر شركة للهواتف الذكية؟",
            options: ["سامسونغ", "أبل", "هواوي", "شاومي"],
            correct: 1
        },
        {
            question: "أي براند تشتهر بـ'الملابس الرياضية'؟",
            options: ["نايكي", "أديداس", "بوما", "كلها صحيح"],
            correct: 3
        },
        {
            question: "ما هي أشهر شركة للسيارات الفاخرة؟",
            options: ["مرسيدس", "بي إم دبليو", "أودي", "كلها صحيح"],
            correct: 3
        },
        {
            question: "أي براند تشتهر بـ'القهوة'؟",
            options: ["ستاربكس", "كوستا", "دانكن", "كلها صحيح"],
            correct: 0
        },
        {
            question: "ما هي أشهر شركة للألعاب؟",
            options: ["سوبر سيل", "بلاي ستيشن", "إكس بوكس", "نينتندو"],
            correct: 3
        },
        {
            question: "أي براند تشتهر بـ'المشروبات الغازية'؟",
            options: ["كوكا كولا", "بيبسي", "سبرايت", "كلها صحيح"],
            correct: 0
        },
        {
            question: "ما هي أشهر شركة للملابس؟",
            options: ["زارا", "إتش أند إم", "أنثروبولوجي", "كلها صحيح"],
            correct: 3
        }
    ],
    "لهجات": [
        {
            question: "ما هي اللهجة الشائعة في الرياض؟",
            options: ["اللهجة الحجازية", "اللهجة النجدية", "اللهجة الجنوبية", "اللهجة الشرقية"],
            correct: 1
        },
        {
            question: "أي لهجة تشتهر بـ'القاف' القوية؟",
            options: ["المصرية", "الخليجية", "الشامية", "المغربية"],
            correct: 1
        },
        {
            question: "ما هي اللهجة الشائعة في القاهرة؟",
            options: ["الإسكندرية", "الصعيد", "المصرية", "السواحلية"],
            correct: 2
        },
        {
            question: "أي لهجة تشتهر بـ'الألف الممدودة'؟",
            options: ["المصرية", "الخليجية", "الشامية", "المغربية"],
            correct: 1
        },
        {
            question: "ما هي اللهجة الشائعة في دمشق؟",
            options: ["اللبنانية", "الأردنية", "الشامية", "الفلسطينية"],
            correct: 2
        },
        {
            question: "أي لهجة تشتهر بـ'الزاي' الرخوة؟",
            options: ["المصرية", "الخليجية", "الشامية", "المغربية"],
            correct: 0
        },
        {
            question: "ما هي اللهجة الشائعة في الرباط؟",
            options: ["الجزائرية", "التونسية", "المغربية", "الليبية"],
            correct: 2
        }
    ]
};

/* ============================================
   DOM Elements
   ============================================ */

const homePage = document.getElementById('homePage');
const categoriesPage = document.getElementById('categoriesPage');
const gameStartPage = document.getElementById('gameStartPage');
const questionsPage = document.getElementById('questionsPage');
const gameOverPage = document.getElementById('gameOverPage');
const countdownOverlay = document.getElementById('countdownOverlay');

const startBtn = document.getElementById('startBtn');
const backToHomeBtn = document.getElementById('backToHomeBtn');
const backToCategoriesBtn = document.getElementById('backToCategoriesBtn');
const backToCategoriesBtn2 = document.getElementById('backToCategoriesBtn2');
const readyBtn = document.getElementById('readyBtn');
const playAgainBtn = document.getElementById('playAgainBtn');

const categoryCards = document.querySelectorAll('.category-card');
const answerBtns = document.querySelectorAll('.answer-btn');
const questionText = document.getElementById('questionText');
const currentQuestionSpan = document.getElementById('currentQuestion');
const countdownNumber = document.querySelector('.countdown-number');

/* ============================================
   Game State
   ============================================ */

let currentCategory = '';
let currentQuestionIndex = 0;
let currentQuestions = [];

/* ============================================
   Initialize App
   ============================================ */

document.addEventListener('DOMContentLoaded', () => {
    setupEventListeners();
});

/* ============================================
   Event Listeners
   ============================================ */

function setupEventListeners() {
    // Navigation buttons
    startBtn.addEventListener('click', () => navigateToPage('categories'));
    backToHomeBtn.addEventListener('click', () => navigateToPage('home'));
    backToCategoriesBtn.addEventListener('click', () => navigateToPage('categories'));
    backToCategoriesBtn2.addEventListener('click', () => navigateToPage('categories'));
    playAgainBtn.addEventListener('click', () => navigateToPage('home'));

    // Category selection
    categoryCards.forEach(card => {
        card.addEventListener('click', () => selectCategory(card.dataset.category));
    });

    // Game start
    readyBtn.addEventListener('click', startCountdown);

    // Answer buttons
    answerBtns.forEach((btn, index) => {
        btn.addEventListener('click', () => checkAnswer(index));
    });
}

/* ============================================
   Page Navigation
   ============================================ */

function navigateToPage(pageName) {
    // Hide all pages
    [homePage, categoriesPage, gameStartPage, questionsPage, gameOverPage].forEach(page => {
        page.classList.remove('active');
    });

    // Show target page
    switch (pageName) {
        case 'home':
            homePage.classList.add('active');
            resetGame();
            break;
        case 'categories':
            categoriesPage.classList.add('active');
            break;
        case 'gameStart':
            gameStartPage.classList.add('active');
            break;
        case 'questions':
            questionsPage.classList.add('active');
            break;
        case 'gameOver':
            gameOverPage.classList.add('active');
            break;
    }
}

/* ============================================
   Category Selection
   ============================================ */

function selectCategory(category) {
    currentCategory = category;
    currentQuestions = questionsData[category];
    currentQuestionIndex = 0;
    navigateToPage('gameStart');
}

/* ============================================
   Countdown Logic
   ============================================ */

function startCountdown() {
    countdownOverlay.classList.add('show');
    let count = 3;

    countdownNumber.textContent = count;

    const countdownInterval = setInterval(() => {
        count--;
        if (count > 0) {
            countdownNumber.textContent = count;
        } else {
            clearInterval(countdownInterval);
            countdownOverlay.classList.remove('show');
            startQuestions();
        }
    }, 1000);
}

/* ============================================
   Questions Logic
   ============================================ */

function startQuestions() {
    navigateToPage('questions');
    showQuestion();
}

function showQuestion() {
    const question = currentQuestions[currentQuestionIndex];
    questionText.textContent = question.question;
    currentQuestionSpan.textContent = currentQuestionIndex + 1;

    // Reset answer buttons
    answerBtns.forEach((btn, index) => {
        btn.textContent = question.options[index];
        btn.classList.remove('correct', 'wrong');
        btn.disabled = false;
    });
}

function checkAnswer(selectedIndex) {
    const question = currentQuestions[currentQuestionIndex];
    const correctIndex = question.correct;

    // Disable all buttons
    answerBtns.forEach(btn => btn.disabled = true);

    // Show correct/incorrect feedback
    answerBtns.forEach((btn, index) => {
        if (index === correctIndex) {
            btn.classList.add('correct');
        } else if (index === selectedIndex && index !== correctIndex) {
            btn.classList.add('wrong');
        }
    });

    // Move to next question after delay
    setTimeout(() => {
        currentQuestionIndex++;

        if (currentQuestionIndex < currentQuestions.length) {
            showQuestion();
        } else {
            navigateToPage('gameOver');
        }
    }, 2000);
}

/* ============================================
   Game Reset
   ============================================ */

function resetGame() {
    currentCategory = '';
    currentQuestionIndex = 0;
    currentQuestions = [];
}

/* ============================================
   Utility Functions
   ============================================ */

// Smooth scroll to top on page changes
function scrollToTop() {
    window.scrollTo({ top: 0, behavior: 'smooth' });
}

// Add smooth transitions to page changes
const originalNavigateToPage = navigateToPage;
navigateToPage = function(pageName) {
    scrollToTop();
    setTimeout(() => {
        originalNavigateToPage(pageName);
    }, 100);
};
